{"ast":null,"code":"var _jsxFileName = \"/home/kevin/Documents/baby-names-spa/src/components/BabyNameForm.jsx\";\nimport React, { useEffect } from 'react';\nimport { get, patch } from 'axios';\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Jumbotron from 'react-bootstrap/Jumbotron';\nimport Spinner from 'react-bootstrap/Spinner';\nimport './BabyNameForm.css';\n\nconst encode = data => {\n  return Object.keys(data).map(key => encodeURIComponent(key) + \"=\" + encodeURIComponent(data[key])).join(\"&\");\n};\n\nconst BabyNameForm = () => {\n  const [babies, setBabies] = React.useState([]);\n  const [baby, setBaby] = React.useState({\n    \"list-id\": parseInt(localStorage.getItem('list_id')),\n    \"baby-name\": \"\",\n    enabled: true\n  });\n  const [getBabiesNow, setGetBabiesNow] = React.useState(false);\n  React.useEffect(() => {\n    const gettingBabies = async () => {\n      try {\n        console.log('getting babies');\n        const response = await get('http://localhost:8888/.netlify/functions/babies-index'); // const response = await get('https://baby-maker-2000.netlify.app/.netlify/functions/babies-index')\n\n        if (response.status === 200) {\n          setBabies(await response.data);\n        }\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    gettingBabies();\n  }, []);\n\n  const showBabies = () => {\n    console.log(babies);\n\n    if (babies === undefined) {\n      return /*#__PURE__*/React.createElement(Spinner, {\n        animation: \"border\",\n        role: \"status\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 20\n        }\n      });\n    } else {\n      return babies.map(baby => {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          key: baby.baby_name,\n          style: {\n            cursor: \"pointer\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"li\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 30\n          }\n        }), /*#__PURE__*/React.createElement(\"p\", {\n          onClick: handleClick,\n          id: baby.name,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 29\n          }\n        }, baby.baby_name)));\n      });\n    }\n  }; // function useDidUpdateEffect(showFunction, input){\n  //     const didMountRef = React.useRef(false);\n  //     React.useEffect(() => {\n  //         if(didMountRef.current){\n  //             showFunction()\n  //         } else {\n  //             didMountRef.current = true\n  //         }\n  //     }, input)\n  // }\n  // React.useEffect(() => {\n  //     // const gettingBabies = async () => {\n  //     //     try {\n  //     //         const response = await get('http://localhost:8888/.netlify/functions/babies-index')\n  //     //         // const response = await get('https://baby-maker-2000.netlify.app/.netlify/functions/babies-index')\n  //     //         setBabies(response.data)\n  //     //         console.log(response.data)\n  //     //     } catch (err){\n  //     //          console.log(err)\n  //     //     }\n  //     //  }\n  //     // gettingBabies();\n  //     console.log('addBaby.length useEffect')\n  //     // debugger\n  //     // addedBaby.map(baby => {\n  //     //     return(\n  //     //         <div key={baby.baby_name} style={{cursor: \"pointer\"}}>\n  //     //             <li><br></br>\n  //     //                 <p onClick={handleClick}>\n  //     //                     {baby.baby_name}\n  //     //                 </p>\n  //     //             </li>\n  //     //         </div>\n  //     //     )\n  //     // })\n  // }, [getBabiesNow])\n\n\n  const handleChange = e => {\n    e.preventDefault();\n    const {\n      value\n    } = e.target;\n    setBaby({ ...baby,\n      \"baby-name\": value\n    });\n  };\n\n  const handleClick = async e => {\n    e.preventDefault();\n    let thisBaby = {};\n\n    for (let i = 0; i < babies.length; i++) {\n      console.log(babies[i]); // if(e.target.id === babies[i].id){\n      //     thisBaby = babies[i]\n      // }\n    } // let element = document.getElementById(thisBaby.id)\n    // if (thisBaby.enabled){\n    //     thisBaby.enabled = false\n    //     element.style.textDecorationLine = \"none\"\n    // } else {\n    //     thisBaby.enabled = true\n    //     element.style.textDecorationLine = \"line-through\"\n    // }\n    // let babyRequest = {\n    //     \"baby\": {\n    //         \"id\": thisBaby.id,\n    //         \"enabled\": thisBaby.enabled\n    //     }\n    // }\n    // try{\n    //     await patch('https://baby-maker-2000.netlify.app/.netlify/functions/update-baby', babyRequest)\n    // } catch (err) {\n    //     console.log(err)\n    // }\n\n  };\n\n  window.onload = function () {\n    let element = document.getElementById(\"name-list\");\n    element.scrollTop = element.scrollHeight;\n  };\n\n  const handleSubmit = e => {\n    babies.push(baby);\n    console.log(babies);\n    setBabies([...babies]);\n    console.log(babies);\n    fetch(\"/index.html\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\n      },\n      body: encode({\n        \"form-name\": \"baby\",\n        ...baby\n      })\n    }).then(() => alert(\"Submitted!\")).catch(error => console.log(error));\n    e.preventDefault();\n  };\n\n  return /*#__PURE__*/React.createElement(Container, {\n    style: {\n      margin: '10px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Jumbotron, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 25\n    }\n  }, \"The Baby Maker 2000\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 25\n    }\n  }, \"Simply put in a name and it'll be saved!\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 25\n    }\n  }, \"Note: To return to this list save your URL some where safe\"), /*#__PURE__*/React.createElement(\"form\", {\n    id: \"form\",\n    onSubmit: handleSubmit,\n    \"netlify-honeypot\": \"bot-fields\",\n    name: \"baby\",\n    method: \"post\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"hidden\",\n    name: \"form-name\",\n    value: \"baby\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 33\n    }\n  }, \"Name! \"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    required: true,\n    id: \"name-input\",\n    placeholder: \"Baby Name!\",\n    type: \"text\",\n    name: \"baby-name\",\n    value: baby[\"baby-name\"],\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 37\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    hidden: true,\n    type: \"number\",\n    name: \"list-id\",\n    value: baby.list_id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 37\n    }\n  }))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 35\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    id: \"submit-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 33\n    }\n  }, \"Make baby!\"))))), /*#__PURE__*/React.createElement(Col, {\n    style: {\n      fontSize: \"24px\",\n      textAlign: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 21\n    }\n  }, \"Baby Names!\"), /*#__PURE__*/React.createElement(\"ul\", {\n    id: \"name-list\",\n    style: {\n      listStyle: \"none\",\n      overflowAnchor: \"bottom\",\n      overflow: \"scroll\",\n      height: \"50vh\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 21\n    }\n  }, showBabies()))));\n};\n\nexport default BabyNameForm;","map":{"version":3,"sources":["/home/kevin/Documents/baby-names-spa/src/components/BabyNameForm.jsx"],"names":["React","useEffect","get","patch","Container","Row","Col","Jumbotron","Spinner","encode","data","Object","keys","map","key","encodeURIComponent","join","BabyNameForm","babies","setBabies","useState","baby","setBaby","parseInt","localStorage","getItem","enabled","getBabiesNow","setGetBabiesNow","gettingBabies","console","log","response","status","err","showBabies","undefined","baby_name","cursor","handleClick","name","handleChange","e","preventDefault","value","target","thisBaby","i","length","window","onload","element","document","getElementById","scrollTop","scrollHeight","handleSubmit","push","fetch","method","headers","body","then","alert","catch","error","margin","list_id","fontSize","textAlign","listStyle","overflowAnchor","overflow","height"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,GAAT,EAAcC,KAAd,QAA2B,OAA3B;AACA,OAAOC,SAAP,MAAsB,2BAAtB;AACA,OAAOC,GAAP,MAAgB,qBAAhB;AACA,OAAOC,GAAP,MAAgB,qBAAhB;AACA,OAAOC,SAAP,MAAsB,2BAAtB;AACA,OAAOC,OAAP,MAAoB,yBAApB;AACA,OAAO,oBAAP;;AAEA,MAAMC,MAAM,GAAIC,IAAD,IAAU;AACrB,SAAOC,MAAM,CAACC,IAAP,CAAYF,IAAZ,EACFG,GADE,CACEC,GAAG,IAAIC,kBAAkB,CAACD,GAAD,CAAlB,GAA0B,GAA1B,GAAgCC,kBAAkB,CAACL,IAAI,CAACI,GAAD,CAAL,CAD3D,EAEFE,IAFE,CAEG,GAFH,CAAP;AAGH,CAJD;;AAMA,MAAMC,YAAY,GAAG,MAAM;AAEvB,QAAM,CAAEC,MAAF,EAAUC,SAAV,IAAwBnB,KAAK,CAACoB,QAAN,CAAe,EAAf,CAA9B;AACA,QAAM,CAAEC,IAAF,EAAQC,OAAR,IAAmBtB,KAAK,CAACoB,QAAN,CAAe;AACpC,eAAWG,QAAQ,CAACC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAD,CADiB;AAEpC,iBAAa,EAFuB;AAGpCC,IAAAA,OAAO,EAAE;AAH2B,GAAf,CAAzB;AAKA,QAAM,CAAEC,YAAF,EAAgBC,eAAhB,IAAoC5B,KAAK,CAACoB,QAAN,CAAe,KAAf,CAA1C;AAEApB,EAAAA,KAAK,CAACC,SAAN,CAAgB,MAAM;AAClB,UAAM4B,aAAa,GAAG,YAAY;AAC/B,UAAI;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACC,cAAMC,QAAQ,GAAG,MAAM9B,GAAG,CAAC,uDAAD,CAA1B,CAFD,CAGC;;AACA,YAAI8B,QAAQ,CAACC,MAAT,KAAoB,GAAxB,EAA4B;AACpBd,UAAAA,SAAS,CAAC,MAAMa,QAAQ,CAACtB,IAAhB,CAAT;AACP;AACL,OAPD,CAOE,OAAOwB,GAAP,EAAW;AACRJ,QAAAA,OAAO,CAACC,GAAR,CAAYG,GAAZ;AACJ;AACH,KAXD;;AAYAL,IAAAA,aAAa;AAChB,GAdD,EAcG,EAdH;;AAkBA,QAAMM,UAAU,GAAG,MAAM;AACrBL,IAAAA,OAAO,CAACC,GAAR,CAAYb,MAAZ;;AACA,QAAGA,MAAM,KAAKkB,SAAd,EAAyB;AACrB,0BAAO,oBAAC,OAAD;AAAS,QAAA,SAAS,EAAC,QAAnB;AAA4B,QAAA,IAAI,EAAC,QAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACH,KAFD,MAEO;AACH,aAAOlB,MAAM,CAACL,GAAP,CAAWQ,IAAI,IAAI;AACtB,4BACI;AAAK,UAAA,GAAG,EAAEA,IAAI,CAACgB,SAAf;AAA0B,UAAA,KAAK,EAAE;AAACC,YAAAA,MAAM,EAAE;AAAT,WAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAL,eACI;AAAG,UAAA,OAAO,EAAEC,WAAZ;AAAyB,UAAA,EAAE,EAAElB,IAAI,CAACmB,IAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACKnB,IAAI,CAACgB,SADV,CADJ,CADJ,CADJ;AASH,OAVM,CAAP;AAWH;AACJ,GAjBD,CA5BuB,CA+CvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,QAAMI,YAAY,GAAIC,CAAD,IAAO;AACxBA,IAAAA,CAAC,CAACC,cAAF;AACA,UAAM;AAAEC,MAAAA;AAAF,QAAYF,CAAC,CAACG,MAApB;AACAvB,IAAAA,OAAO,CAAC,EAAE,GAAGD,IAAL;AAAW,mBAAauB;AAAxB,KAAD,CAAP;AACH,GAJD;;AAMA,QAAML,WAAW,GAAG,MAAOG,CAAP,IAAa;AAC7BA,IAAAA,CAAC,CAACC,cAAF;AACA,QAAIG,QAAQ,GAAG,EAAf;;AACA,SAAI,IAAIC,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG7B,MAAM,CAAC8B,MAA1B,EAAkCD,CAAC,EAAnC,EAAsC;AAClCjB,MAAAA,OAAO,CAACC,GAAR,CAAYb,MAAM,CAAC6B,CAAD,CAAlB,EADkC,CAElC;AACA;AACA;AACH,KAR4B,CAU7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACH,GA7BD;;AA+BAE,EAAAA,MAAM,CAACC,MAAP,GAAc,YAAW;AACrB,QAAIC,OAAO,GAAGC,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAAd;AACAF,IAAAA,OAAO,CAACG,SAAR,GAAoBH,OAAO,CAACI,YAA5B;AACH,GAHD;;AAKA,QAAMC,YAAY,GAAId,CAAD,IAAO;AACxBxB,IAAAA,MAAM,CAACuC,IAAP,CAAYpC,IAAZ;AACAS,IAAAA,OAAO,CAACC,GAAR,CAAYb,MAAZ;AACAC,IAAAA,SAAS,CAAC,CAAC,GAAGD,MAAJ,CAAD,CAAT;AACAY,IAAAA,OAAO,CAACC,GAAR,CAAYb,MAAZ;AACAwC,IAAAA,KAAK,CAAC,aAAD,EAAgB;AACjBC,MAAAA,MAAM,EAAE,MADS;AAEjBC,MAAAA,OAAO,EAAE;AACL,wBAAgB;AADX,OAFQ;AAKjBC,MAAAA,IAAI,EAAEpD,MAAM,CAAC;AAAC,qBAAa,MAAd;AAAsB,WAAGY;AAAzB,OAAD;AALK,KAAhB,CAAL,CAOKyC,IAPL,CAOU,MAAMC,KAAK,CAAC,YAAD,CAPrB,EAQKC,KARL,CAQWC,KAAK,IAAInC,OAAO,CAACC,GAAR,CAAYkC,KAAZ,CARpB;AASAvB,IAAAA,CAAC,CAACC,cAAF;AACH,GAfD;;AAiBA,sBACI,oBAAC,SAAD;AAAW,IAAA,KAAK,EAAE;AAAEuB,MAAAA,MAAM,EAAE;AAAV,KAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gDAFJ,eAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kEAHJ,eAII;AAAM,IAAA,EAAE,EAAC,MAAT;AAAgB,IAAA,QAAQ,EAAEV,YAA1B;AAAwC,wBAAiB,YAAzD;AAAsE,IAAA,IAAI,EAAC,MAA3E;AAAkF,IAAA,MAAM,EAAC,MAAzF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAO,IAAA,IAAI,EAAC,QAAZ;AAAqB,IAAA,IAAI,EAAC,WAA1B;AAAsC,IAAA,KAAK,EAAC,MAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAO,IAAA,QAAQ,MAAf;AAAgB,IAAA,EAAE,EAAC,YAAnB;AAAgC,IAAA,WAAW,EAAC,YAA5C;AAAyD,IAAA,IAAI,EAAC,MAA9D;AAAqE,IAAA,IAAI,EAAC,WAA1E;AAAsF,IAAA,KAAK,EAAEnC,IAAI,CAAC,WAAD,CAAjG;AAAgH,IAAA,QAAQ,EAAEoB,YAA1H;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,eAEI;AAAO,IAAA,MAAM,MAAb;AAAc,IAAA,IAAI,EAAC,QAAnB;AAA4B,IAAA,IAAI,EAAC,SAAjC;AAA2C,IAAA,KAAK,EAAEpB,IAAI,CAAC8C,OAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CAFJ,CAFJ,eAQU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARV,eASI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAsB,IAAA,EAAE,EAAC,eAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,CATJ,CAJJ,CADJ,CADJ,eAqBI,oBAAC,GAAD;AAAK,IAAA,KAAK,EAAE;AAACC,MAAAA,QAAQ,EAAE,MAAX;AAAmBC,MAAAA,SAAS,EAAE;AAA9B,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADJ,eAEI;AAAI,IAAA,EAAE,EAAC,WAAP;AAAmB,IAAA,KAAK,EAAE;AAACC,MAAAA,SAAS,EAAE,MAAZ;AAAoBC,MAAAA,cAAc,EAAE,QAApC;AAA8CC,MAAAA,QAAQ,EAAE,QAAxD;AAAkEC,MAAAA,MAAM,EAAE;AAA1E,KAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKtC,UAAU,EADf,CAFJ,CArBJ,CADJ,CADJ;AAgCH,CAhLD;;AAkLA,eAAelB,YAAf","sourcesContent":["import React, { useEffect } from 'react';\nimport { get, patch } from 'axios'\nimport Container from 'react-bootstrap/Container'\nimport Row from 'react-bootstrap/Row'\nimport Col from 'react-bootstrap/Col'\nimport Jumbotron from 'react-bootstrap/Jumbotron'\nimport Spinner from 'react-bootstrap/Spinner'\nimport './BabyNameForm.css'\n\nconst encode = (data) => {\n    return Object.keys(data)\n        .map(key => encodeURIComponent(key) + \"=\" + encodeURIComponent(data[key]))\n        .join(\"&\")\n}\n\nconst BabyNameForm = () => {\n\n    const [ babies, setBabies ] = React.useState([])\n    const [ baby, setBaby] = React.useState({ \n        \"list-id\": parseInt(localStorage.getItem('list_id')),\n        \"baby-name\": \"\",\n        enabled: true\n    })\n    const [ getBabiesNow, setGetBabiesNow ] = React.useState(false)\n\n    React.useEffect(() => {\n        const gettingBabies = async () => {\n           try {\n               console.log('getting babies')\n                const response = await get('http://localhost:8888/.netlify/functions/babies-index')\n                // const response = await get('https://baby-maker-2000.netlify.app/.netlify/functions/babies-index')\n                if (response.status === 200){\n                        setBabies(await response.data)\n                }\n           } catch (err){\n                console.log(err)\n           }\n        }\n        gettingBabies();\n    }, [])\n\n\n\n    const showBabies = () => {\n        console.log(babies)\n        if(babies === undefined) {\n            return <Spinner animation=\"border\" role=\"status\" />\n        } else {\n            return babies.map(baby => {\n                return(\n                    <div key={baby.baby_name} style={{cursor: \"pointer\"}}>\n                        <li ><br></br>\n                            <p onClick={handleClick} id={baby.name} >\n                                {baby.baby_name}\n                            </p>\n                        </li>\n                    </div>\n                )\n            })\n        }\n    }\n\n    // function useDidUpdateEffect(showFunction, input){\n    //     const didMountRef = React.useRef(false);\n    //     React.useEffect(() => {\n    //         if(didMountRef.current){\n    //             showFunction()\n    //         } else {\n    //             didMountRef.current = true\n    //         }\n    //     }, input)\n    // }\n\n    // React.useEffect(() => {\n    //     // const gettingBabies = async () => {\n    //     //     try {\n    //     //         const response = await get('http://localhost:8888/.netlify/functions/babies-index')\n    //     //         // const response = await get('https://baby-maker-2000.netlify.app/.netlify/functions/babies-index')\n    //     //         setBabies(response.data)\n    //     //         console.log(response.data)\n    //     //     } catch (err){\n    //     //          console.log(err)\n    //     //     }\n    //     //  }\n    //     // gettingBabies();\n    //     console.log('addBaby.length useEffect')\n    //     // debugger\n    //     // addedBaby.map(baby => {\n    //     //     return(\n    //     //         <div key={baby.baby_name} style={{cursor: \"pointer\"}}>\n    //     //             <li><br></br>\n    //     //                 <p onClick={handleClick}>\n    //     //                     {baby.baby_name}\n    //     //                 </p>\n    //     //             </li>\n    //     //         </div>\n    //     //     )\n    //     // })\n    // }, [getBabiesNow])\n\n    const handleChange = (e) => {\n        e.preventDefault()\n        const { value } = e.target\n        setBaby({ ...baby, \"baby-name\": value })\n    }\n\n    const handleClick = async (e) => {\n        e.preventDefault()\n        let thisBaby = {}\n        for(let i = 0; i < babies.length; i++){\n            console.log(babies[i])\n            // if(e.target.id === babies[i].id){\n            //     thisBaby = babies[i]\n            // }\n        }\n\n        // let element = document.getElementById(thisBaby.id)\n        // if (thisBaby.enabled){\n        //     thisBaby.enabled = false\n        //     element.style.textDecorationLine = \"none\"\n        // } else {\n        //     thisBaby.enabled = true\n        //     element.style.textDecorationLine = \"line-through\"\n        // }\n        // let babyRequest = {\n        //     \"baby\": {\n        //         \"id\": thisBaby.id,\n        //         \"enabled\": thisBaby.enabled\n        //     }\n        // }\n        // try{\n        //     await patch('https://baby-maker-2000.netlify.app/.netlify/functions/update-baby', babyRequest)\n        // } catch (err) {\n        //     console.log(err)\n        // }\n    }\n\n    window.onload=function() {\n        let element = document.getElementById(\"name-list\")\n        element.scrollTop = element.scrollHeight\n    }\n\n    const handleSubmit = (e) => {\n        babies.push(baby)\n        console.log(babies)\n        setBabies([...babies])\n        console.log(babies)\n        fetch(\"/index.html\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/x-www-form-urlencoded\",\n            },\n            body: encode({\"form-name\": \"baby\", ...baby})\n        })\n            .then(() => alert(\"Submitted!\"))\n            .catch(error => console.log(error))\n        e.preventDefault()\n    }\n\n    return(\n        <Container style={{ margin: '10px'}}>\n            <Row>\n                <Col>\n                    <Jumbotron>\n                        <h1>The Baby Maker 2000</h1>\n                        <p>Simply put in a name and it'll be saved!</p>\n                        <p>Note: To return to this list save your URL some where safe</p>\n                        <form id=\"form\" onSubmit={handleSubmit} netlify-honeypot=\"bot-fields\" name=\"baby\" method=\"post\">\n                            <input type=\"hidden\" name=\"form-name\" value=\"baby\" />\n                            <div>\n                                <label>Name! </label>\n                                <div>\n                                    <input required id=\"name-input\" placeholder=\"Baby Name!\" type=\"text\" name=\"baby-name\" value={baby[\"baby-name\"]} onChange={handleChange} />\n                                    <input hidden type=\"number\" name=\"list-id\" value={baby.list_id} />\n                                </div>\n                            </div><br></br>\n                            <div>\n                                <button type=\"submit\" id=\"submit-button\">Make baby!</button>\n                            </div>\n                        </form>\n                    </Jumbotron>\n                </Col>\n                <Col style={{fontSize: \"24px\", textAlign: \"center\"}}>\n                    <h1>Baby Names!</h1>\n                    <ul id=\"name-list\" style={{listStyle: \"none\", overflowAnchor: \"bottom\", overflow: \"scroll\", height: \"50vh\"}}>\n                        {showBabies()}\n                    </ul>\n                </Col>\n            </Row>\n        </Container>\n    )\n}\n\nexport default BabyNameForm;"]},"metadata":{},"sourceType":"module"}