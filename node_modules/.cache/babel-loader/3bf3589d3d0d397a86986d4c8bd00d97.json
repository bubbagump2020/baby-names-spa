{"ast":null,"code":"import _objectSpread from\"/home/kevin/Documents/baby-names-spa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/kevin/Documents/baby-names-spa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/kevin/Documents/baby-names-spa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/kevin/Documents/baby-names-spa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{useDispatch,useSelector}from'react-redux';import{get,patch}from'axios';import{getBabies,enableBaby,disableBaby}from'../redux/actions/baby-actions';import Container from'react-bootstrap/Container';import Row from'react-bootstrap/Row';import Col from'react-bootstrap/Col';import Form from'react-bootstrap/Form';import Jumbotron from'react-bootstrap/Jumbotron';import Button from'react-bootstrap/Button';import{toast}from'react-toastify';var encode=function encode(data){return Object.keys(data).map(function(key){return encodeURIComponent(key)+\"=\"+encodeURIComponent(data[key]);}).join(\"&\");};var BabyNameForm=function BabyNameForm(){var dispatch=useDispatch();var _useSelector=useSelector(function(state){return{babiesList:state.babiesList.babies};}),babiesList=_useSelector.babiesList;var _React$useState=React.useState({list_id:parseInt(localStorage.getItem('user_id')),baby_name:\"\"}),_React$useState2=_slicedToArray(_React$useState,2),baby=_React$useState2[0],setBaby=_React$useState2[1];React.useEffect(function(){var gettingBabies=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var babies,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:babies=[];_context.prev=1;_context.next=4;return get('https://baby-maker-2000.netlify.app/.netlify/functions/babies-index');case 4:response=_context.sent;if(response.status===200){babies=response.data;dispatch(getBabies(babies));}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function gettingBabies(){return _ref.apply(this,arguments);};}();gettingBabies();});var showBabies=function showBabies(){return babiesList.map(function(baby){return/*#__PURE__*/React.createElement(\"div\",{key:baby.id,style:{cursor:\"pointer\"}},/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"p\",{onClick:handleClick,id:baby.id,style:{textDecorationLine:baby.enabled?\"none\":\"line-through\"}},baby.baby_name)));});};var handleChange=function handleChange(e){e.preventDefault();setBaby(_objectSpread(_objectSpread({},baby),{},{baby_name:e.target.value}));};var handleClick=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var thisBaby,babies,i,babyRequest;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();thisBaby={};babies=babiesList;for(i=0;i<babies.length;i++){if(e.target.id===babies[i].id){thisBaby=babies[i];}}if(thisBaby.enabled){thisBaby.enabled=false;dispatch(disableBaby(thisBaby.id));}else{thisBaby.enabled=true;dispatch(enableBaby(thisBaby.id));}babyRequest={\"baby\":{\"id\":thisBaby.id,\"enabled\":thisBaby.enabled}};_context2.prev=6;_context2.next=9;return patch(\"https://baby-maker-2000.netlify.app/.netlify/functions/update-baby\",babyRequest);case 9:_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](6);console.log(_context2.t0);case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[6,11]]);}));return function handleClick(_x){return _ref2.apply(this,arguments);};}();window.onload=function(){var element=document.getElementById(\"name-list\");element.scrollTop=element.scrollHeight;};var handleSubmit=function handleSubmit(e){e.preventDefault();fetch(\"/\",{method:\"POST\",headers:{\"Content-Type\":\"application/x-www-form-urlencoded\"},body:encode(_objectSpread({\"form-name\":\"baby\"},baby))}).then(function(response){return response.json();}).then(function(data){if(data.message){toast.error(data.message,{position:\"top-center\",progress:undefined,closeOnClick:true,hideProgressBar:true});}else{dispatch(getBabies(data));}}).catch(function(error){return console.log(error);});};return/*#__PURE__*/React.createElement(Container,{style:{margin:'10px'}},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Jumbotron,null,/*#__PURE__*/React.createElement(\"h1\",null,\"The Baby Maker 2000\"),/*#__PURE__*/React.createElement(\"p\",null,\"Simply put in a name and it'll be saved!\"),/*#__PURE__*/React.createElement(\"p\",null,\"Note: To return to this list save your URL some where safe\"),/*#__PURE__*/React.createElement(Form,{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(Form.Group,null,/*#__PURE__*/React.createElement(Form.Label,null,\"Name!\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",placeholder:\"Baby Name\",name:\"baby-name\",onChange:function onChange(e){return handleChange(e);}})),/*#__PURE__*/React.createElement(Button,{variant:\"primary\",type:\"submit\"},\"Make Baby!\")))),/*#__PURE__*/React.createElement(Col,{style:{fontSize:\"24px\",textAlign:\"center\"}},/*#__PURE__*/React.createElement(\"h1\",null,\"Baby Names!\"),/*#__PURE__*/React.createElement(\"ul\",{id:\"name-list\",style:{listStyle:\"none\",overflowAnchor:\"bottom\",overflow:\"scroll\",height:\"50vh\"}},showBabies()))));};export default BabyNameForm;","map":{"version":3,"sources":["/home/kevin/Documents/baby-names-spa/src/components/BabyNameForm.jsx"],"names":["React","useDispatch","useSelector","get","patch","getBabies","enableBaby","disableBaby","Container","Row","Col","Form","Jumbotron","Button","toast","encode","data","Object","keys","map","key","encodeURIComponent","join","BabyNameForm","dispatch","state","babiesList","babies","useState","list_id","parseInt","localStorage","getItem","baby_name","baby","setBaby","useEffect","gettingBabies","response","status","console","log","showBabies","id","cursor","handleClick","textDecorationLine","enabled","handleChange","e","preventDefault","target","value","thisBaby","i","length","babyRequest","window","onload","element","document","getElementById","scrollTop","scrollHeight","handleSubmit","fetch","method","headers","body","then","json","message","error","position","progress","undefined","closeOnClick","hideProgressBar","catch","margin","fontSize","textAlign","listStyle","overflowAnchor","overflow","height"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useDispatch, useSelector} from 'react-redux'\nimport { get, patch } from 'axios'\nimport { getBabies, enableBaby, disableBaby } from '../redux/actions/baby-actions'\nimport Container from 'react-bootstrap/Container'\nimport Row from 'react-bootstrap/Row'\nimport Col from 'react-bootstrap/Col'\nimport Form from 'react-bootstrap/Form'\nimport Jumbotron from 'react-bootstrap/Jumbotron'\nimport Button from 'react-bootstrap/Button'\nimport { toast } from 'react-toastify';\n\nconst encode = (data) => {\n    return Object.keys(data)\n        .map(key => encodeURIComponent(key) + \"=\" + encodeURIComponent(data[key]))\n        .join(\"&\")\n}\n\nconst BabyNameForm = () => {\n\n    const dispatch = useDispatch();\n    const { babiesList } = useSelector(state => ({ babiesList: state.babiesList.babies }))\n    const [ baby, setBaby] = React.useState({ \n        list_id: parseInt(localStorage.getItem('user_id')),\n        baby_name: \"\"\n    })\n\n    React.useEffect(() => {\n        const gettingBabies = async () => {\n\n           let babies = [];\n           try {\n                // const response = await get(\"http://localhost:8888/.netlify/functions/babies-index\")\n                const response = await get('https://baby-maker-2000.netlify.app/.netlify/functions/babies-index')\n                if (response.status === 200){\n                        babies = response.data\n                        dispatch(getBabies(babies))\n                }\n           } catch (err){\n                console.log(err)\n           }\n\n        }\n        gettingBabies();\n    })\n\n    const showBabies = () => {\n        return babiesList.map(baby => {\n            return(\n                <div key={baby.id} style={{cursor: \"pointer\"}}>\n                    <li ><br></br>\n                        <p onClick={handleClick} id={baby.id} style={{textDecorationLine: baby.enabled ? \"none\" : \"line-through\",}}>\n                            {baby.baby_name}\n                        </p>\n                    </li>\n                </div>\n            )\n        })\n    }\n\n    const handleChange = (e) => {\n        e.preventDefault()\n        setBaby({ ...baby, baby_name: e.target.value })\n    }\n\n    const handleClick = async (e) => {\n        e.preventDefault()\n        let thisBaby = {}\n        let babies = babiesList\n        for(let i = 0; i < babies.length; i++){\n            if(e.target.id === babies[i].id){\n                thisBaby = babies[i]\n            }\n        }\n        if (thisBaby.enabled){\n            thisBaby.enabled = false\n            dispatch(disableBaby(thisBaby.id))\n        } else {\n            thisBaby.enabled = true\n            dispatch(enableBaby(thisBaby.id))\n        }\n        let babyRequest = {\n            \"baby\": {\n                \"id\": thisBaby.id,\n                \"enabled\": thisBaby.enabled\n            }\n        }\n        try{\n            // await patch(`http://localhost:8888/.netlify/functions/update-baby`, babyRequest)\n            await patch(\"https://baby-maker-2000.netlify.app/.netlify/functions/update-baby\", babyRequest)\n        } catch (err) {\n            console.log(err)\n        }\n    }\n\n    window.onload=function() {\n        let element = document.getElementById(\"name-list\")\n        element.scrollTop = element.scrollHeight\n    }\n\n    const handleSubmit = (e) => {\n        e.preventDefault()\n        fetch(\"/\", {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\n            body: encode({\"form-name\": \"baby\", ...baby})\n        })\n            .then(response => response.json())\n            .then(data =>{\n                if(data.message){\n                    toast.error(data.message, {\n                        position: \"top-center\",\n                        progress: undefined,\n                        closeOnClick: true,\n                        hideProgressBar: true,\n                    })\n                } else {\n                    dispatch(getBabies(data))\n                }\n            })\n            .catch(error => console.log(error))\n    }\n\n    return(\n        <Container style={{ margin: '10px'}}>\n            <Row>\n                <Col>\n                    <Jumbotron>\n                        <h1>The Baby Maker 2000</h1>\n                        <p>Simply put in a name and it'll be saved!</p>\n                        <p>Note: To return to this list save your URL some where safe</p>\n                        <Form onSubmit={handleSubmit}>\n                            <Form.Group>\n                                <Form.Label>Name!</Form.Label>\n                                <Form.Control type=\"text\" placeholder=\"Baby Name\" name=\"baby-name\" onChange={e => handleChange(e)}/>\n                            </Form.Group>\n                            <Button variant=\"primary\" type=\"submit\">\n                                Make Baby!\n                            </Button>\n                        </Form>\n                    </Jumbotron>\n                </Col>\n                <Col style={{fontSize: \"24px\", textAlign: \"center\"}}>\n                    <h1>Baby Names!</h1>\n                    <ul id=\"name-list\" style={{listStyle: \"none\", overflowAnchor: \"bottom\", overflow: \"scroll\", height: \"50vh\"}}>\n                        {showBabies()}\n                    </ul>\n                </Col>\n            </Row>\n        </Container>\n    )\n}\n\nexport default BabyNameForm;"]},"metadata":{},"sourceType":"module"}